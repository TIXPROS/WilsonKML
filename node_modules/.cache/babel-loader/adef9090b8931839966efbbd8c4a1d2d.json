{"ast":null,"code":"var parser=require('xml2js');var convert=function convert(value){try{var finalData=[];parser.parseString(value,function(err,result){var days=result[\"kml:kml\"]['kml:Document'][0]['kml:ExtendedData'][0]['dwd:ProductDefinition'][0]['dwd:ForecastTimeSteps'][0]['dwd:TimeStep'];var data=result[\"kml:kml\"]['kml:Document'][0]['kml:Placemark'][0]['kml:ExtendedData'][0][\"dwd:Forecast\"];var tmpData=[];data.forEach(function(element,index){var tmp=element['dwd:value'][0].split(/\\s+/);var filter=tmp.filter(function(el){return el!==\"\";});tmpData.push([element[\"$\"]['dwd:elementName'],filter]);});days.forEach(function(element,index){var jsonObject={};var tmp={};jsonObject.date=element;tmpData.forEach(function(element){tmp[element[0]]=element[1][index];});jsonObject.values=tmp;finalData.push(jsonObject);});});return finalData;}catch(error){console.log(error);alert('Le fichier choisi est incompatible');return false;}};export{convert};","map":{"version":3,"sources":["/root/Bureau/Parser/src/components/Parser.js"],"names":["parser","require","convert","value","finalData","parseString","err","result","days","data","tmpData","forEach","element","index","tmp","split","filter","el","push","jsonObject","date","values","error","console","log","alert"],"mappings":"AAAA,GAAMA,CAAAA,MAAM,CAAGC,OAAO,CAAC,QAAD,CAAtB,CAEA,GAAMC,CAAAA,OAAO,CAAG,QAAVA,CAAAA,OAAU,CAACC,KAAD,CAAW,CACvB,GAAI,CACA,GAAIC,CAAAA,SAAS,CAAG,EAAhB,CAEJJ,MAAM,CAACK,WAAP,CAAmBF,KAAnB,CAA0B,SAACG,GAAD,CAAMC,MAAN,CAAiB,CAEvC,GAAIC,CAAAA,IAAI,CAAGD,MAAM,CAAC,SAAD,CAAN,CAAkB,cAAlB,EAAkC,CAAlC,EAAqC,kBAArC,EAAyD,CAAzD,EAA4D,uBAA5D,EAAqF,CAArF,EAAwF,uBAAxF,EAAiH,CAAjH,EAAoH,cAApH,CAAX,CAEA,GAAIE,CAAAA,IAAI,CAAGF,MAAM,CAAC,SAAD,CAAN,CAAkB,cAAlB,EAAkC,CAAlC,EAAqC,eAArC,EAAsD,CAAtD,EAAyD,kBAAzD,EAA6E,CAA7E,EAAgF,cAAhF,CAAX,CACA,GAAIG,CAAAA,OAAO,CAAG,EAAd,CAEAD,IAAI,CAACE,OAAL,CAAa,SAACC,OAAD,CAAUC,KAAV,CAAoB,CAG7B,GAAIC,CAAAA,GAAG,CAAGF,OAAO,CAAC,WAAD,CAAP,CAAqB,CAArB,EAAwBG,KAAxB,CAA8B,KAA9B,CAAV,CAEA,GAAIC,CAAAA,MAAM,CAAGF,GAAG,CAACE,MAAJ,CAAW,SAAUC,EAAV,CAAc,CAClC,MAAOA,CAAAA,EAAE,GAAK,EAAd,CACH,CAFY,CAAb,CAKAP,OAAO,CAACQ,IAAR,CAAa,CAACN,OAAO,CAAC,GAAD,CAAP,CAAa,iBAAb,CAAD,CAAkCI,MAAlC,CAAb,EACH,CAXD,EAaAR,IAAI,CAACG,OAAL,CAAa,SAACC,OAAD,CAAUC,KAAV,CAAoB,CAC7B,GAAIM,CAAAA,UAAU,CAAG,EAAjB,CACA,GAAIL,CAAAA,GAAG,CAAG,EAAV,CACAK,UAAU,CAACC,IAAX,CAAkBR,OAAlB,CACAF,OAAO,CAACC,OAAR,CAAgB,SAAAC,OAAO,CAAI,CACvBE,GAAG,CAACF,OAAO,CAAC,CAAD,CAAR,CAAH,CAAkBA,OAAO,CAAC,CAAD,CAAP,CAAWC,KAAX,CAAlB,CACH,CAFD,EAGAM,UAAU,CAACE,MAAX,CAAoBP,GAApB,CACAV,SAAS,CAACc,IAAV,CAAeC,UAAf,EACH,CATD,EAWH,CA/BD,EAgCA,MAAOf,CAAAA,SAAP,CACC,CAAC,MAAOkB,KAAP,CAAc,CACZC,OAAO,CAACC,GAAR,CAAYF,KAAZ,EACAG,KAAK,CAAC,oCAAD,CAAL,CACA,MAAO,MAAP,CACH,CACJ,CA1CD,CA4CA,OAASvB,OAAT","sourcesContent":["const parser = require('xml2js')\n\nconst convert = (value) => {\n    try {\n        var finalData = []\n\n    parser.parseString(value, (err, result) => {\n\n        let days = result[\"kml:kml\"]['kml:Document'][0]['kml:ExtendedData'][0]['dwd:ProductDefinition'][0]['dwd:ForecastTimeSteps'][0]['dwd:TimeStep'];\n\n        let data = result[\"kml:kml\"]['kml:Document'][0]['kml:Placemark'][0]['kml:ExtendedData'][0][\"dwd:Forecast\"];\n        var tmpData = [];\n\n        data.forEach((element, index) => {\n\n\n            let tmp = element['dwd:value'][0].split(/\\s+/);\n\n            let filter = tmp.filter(function (el) {\n                return el !== \"\"\n            });\n\n\n            tmpData.push([element[\"$\"]['dwd:elementName'], filter])\n        });\n\n        days.forEach((element, index) => {\n            let jsonObject = {};\n            let tmp = {}\n            jsonObject.date = element;\n            tmpData.forEach(element => {\n                tmp[element[0]] = element[1][index]\n            });\n            jsonObject.values = tmp\n            finalData.push(jsonObject)\n        });\n\n    })\n    return finalData\n    } catch (error) {\n        console.log(error);\n        alert('Le fichier choisi est incompatible')\n        return false;\n    }\n}\n\nexport { convert };"]},"metadata":{},"sourceType":"module"}