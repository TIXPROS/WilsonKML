{"ast":null,"code":"import _regeneratorRuntime from\"/root/Bureau/Parser/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/root/Bureau/Parser/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/root/Bureau/Parser/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/root/Bureau/Parser/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/root/Bureau/Parser/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/root/Bureau/Parser/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import{Button,CircularProgress,Input,InputLabel,MenuItem,Select,Typography}from'@material-ui/core';import React,{Component}from'react';import{findVariableName,findVariableUnit}from'../constants/variableName';//Importation des fonctions permettant de retrouver les noms et les unités des variables \nimport{findGroup}from\"../constants/unityConvert\";import{convert}from\"./Parser\";//Importation de l'extracteur redéfnie\nimport{filter}from\"../constants/filter\";//Importation de la fonction permettant de filtrer\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var sectionTitles=[\"All\",\"Wind\",\"Wind speed threshold\",\"Wind gusts 1h\",\"Wind gusts 3h\",\"Temperature\",\"Visibility\"];var Main=/*#__PURE__*/function(_Component){_inherits(Main,_Component);var _super=_createSuper(Main);function Main(props){var _this;_classCallCheck(this,Main);_this=_super.call(this,props);_this.showFile=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e){var reader;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:e.preventDefault();reader=new FileReader();reader.onload=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var text,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:text=e.target.result;data=convert(text);if(data.data){_this.setState({data:data.data,filed:true,supp:data.supp});}else{_this.setState({filed:false});}case 3:case\"end\":return _context.stop();}}},_callee);}));return function(_x2){return _ref2.apply(this,arguments);};}();e.target.files[0]&&reader.readAsText(e.target.files[0]);case 4:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x){return _ref.apply(this,arguments);};}();_this.state={filed:false,//Controleur de l'existence d'un fichier chargé\ndata:[],//les lignes de données\ndays:[],//les jours\nfinale:[],//données compilées\nkeys:[],//les variables (PPPP et autres)\nloading:false,//Controleur du chargement de la page\nsupp:null,//Données suppléméntaires de locations,\nfilter:\"All\",current:{}};return _this;}//Fonction de récupération de fichier\n_createClass(Main,[{key:\"range\",value://Fonction de compilation des données\nfunction(){var _range=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var _this2=this;var days,final;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return new Promise(function(r){return setTimeout(r,2000);});case 2:days=[];final=[];this.state.data.forEach(function(element){var existed=days.indexOf(element.date.split('T')[0]);if(existed===-1){var dayTMP=element.date.split('T')[0];days.push(dayTMP);}});this.setState({days:days},function(){//Extraction du Jour/Mois/Années des dates\ndays.forEach(function(element){var filteredHour=_this2.state.data.filter(function(el){return el.date.split('T')[0]===element;});var tmp={};tmp['date']=element;tmp[\"values\"]=filteredHour;final.push(tmp);});_this2.setState({finale:final,keys:Object.keys(final[0].values[0].values),loading:false});});case 6:case\"end\":return _context3.stop();}}},_callee3,this);}));function range(){return _range.apply(this,arguments);}return range;}()//Rendu visuel\n},{key:\"render\",value:function render(){var _this3=this;return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h3\",component:\"h2\",children:\"Convertisseur Kml to JS\"}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Input,{type:\"file\",onChange:function onChange(e){return _this3.showFile(e);},inputProps:{accept:'.xml,.kml',style:{height:30}},style:{marginTop:20}})}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Button,{title:\"Valider\",onClick:function onClick(){if(_this3.state.filed){_this3.setState({loading:true},function(){_this3.range();});}else{alert('Veuillez choisir un fichier à convertir');}},color:\"primary\",variant:\"contained\",style:{marginTop:10,marginBottom:10},children:\"Valider\"}),/*#__PURE__*/_jsx(\"div\",{children:this.state.loading&&/*#__PURE__*/_jsx(CircularProgress,{color:\"secondary\",style:{marginTop:15}})}),/*#__PURE__*/_jsxs(\"div\",{children:[this.state.finale.length>0&&this.state.filed&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{style:{margin:20},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",flexDirection:\"row\"},children:[/*#__PURE__*/_jsx(Typography,{style:{fontWeight:'bold',marginRight:5},children:\"Origin : \"}),/*#__PURE__*/_jsx(Typography,{children:\"EBBR\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",flexDirection:\"row\"},children:[/*#__PURE__*/_jsx(Typography,{style:{fontWeight:'bold',marginRight:5},children:\"Issuer : \"}),/*#__PURE__*/_jsx(Typography,{children:this.state.supp.issuer}),/*#__PURE__*/_jsx(Typography,{style:{fontWeight:'bold',marginRight:5,marginLeft:20},children:\"ProductID : \"}),/*#__PURE__*/_jsx(Typography,{children:this.state.supp.productID}),/*#__PURE__*/_jsx(Typography,{style:{fontWeight:'bold',marginRight:5,marginLeft:20},children:\"IssueTime : \"}),/*#__PURE__*/_jsx(Typography,{children:this.state.supp.issueTime})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",flexDirection:\"row\"},children:[/*#__PURE__*/_jsxs(\"div\",{style:styles.selector,children:[/*#__PURE__*/_jsx(InputLabel,{id:\"label\",children:\"Location\"}),/*#__PURE__*/_jsx(Select,{labelId:\"label\",id:\"select\",value:\"EBBR\",children:/*#__PURE__*/_jsx(MenuItem,{value:\"EBBR\",children:\"EBBR\"})})]}),/*#__PURE__*/_jsxs(\"div\",{style:styles.selector,children:[/*#__PURE__*/_jsx(InputLabel,{id:\"label\",children:\"Parameter group\"}),/*#__PURE__*/_jsx(Select,{labelId:\"label\",id:\"select\",value:this.state.filter,onChange:function onChange(val){_this3.setState({filter:val.target.value});},children:sectionTitles.map(function(el,index){return/*#__PURE__*/_jsx(MenuItem,{value:el,children:el},index);})})]})]})]}),this.state.finale.length>0&&this.state.filed&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"table\",{style:{display:\"block\",maxHeight:600,overflowY:\"scroll\",overflowX:\"scroll\",maxWidth:\"96%\",marginLeft:\"2%\"},children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[this.state.finale.length>0&&this.state.filed&&/*#__PURE__*/_jsx(\"th\",{style:{top:0}}),this.state.finale.map(function(_el){return _el.values.map(function(el,id){return/*#__PURE__*/_jsxs(\"th\",{style:{top:0},children:[_el.date.slice(8,10),/*#__PURE__*/_jsx(\"br\",{}),el.date.split('T')[1].slice(0,2)+\"Z\"]},id);});})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:filter(this.state.filter,this.state.keys).map(function(elem,ind){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{style:{left:0,position:\"sticky\",backgroundColor:\"#1a8cff\"},children:/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:'bold',color:\"#fff\",width:300},children:findVariableName(elem)===false?elem:findVariableName(elem)+\"\\n(\"+findVariableUnit(elem)+\")\"})}),_this3.state.finale.map(function(_el){return _el.values.map(function(el,i){return/*#__PURE__*/_jsx(\"td\",{onClick:function onClick(){_this3.setState({current:{id:i,variable:elem}});},style:{cursor:\"pointer\",backgroundColor:(i===_this3.state.current.id||elem===_this3.state.current.variable)&&\"#70b7ff\"},children:el.values[elem]===\"-\"?\"N/A\":findGroup(elem,el.values[elem])},i);});})]},ind);})})]}),/*#__PURE__*/_jsx(Typography,{style:{textAlign:'left',marginLeft:'2%'},children:\"Showing 1 to \"+this.state.keys.length+\" of \"+this.state.keys.length+\" pages\"})]})]})]});}}]);return Main;}(Component);var styles={selector:{displey:\"flex\",flexDirection:'row',margin:15}};export default Main;","map":{"version":3,"sources":["/root/Bureau/Parser/src/components/ClientMain.js"],"names":["Button","CircularProgress","Input","InputLabel","MenuItem","Select","Typography","React","Component","findVariableName","findVariableUnit","findGroup","convert","filter","sectionTitles","Main","props","showFile","e","preventDefault","reader","FileReader","onload","text","target","result","data","setState","filed","supp","files","readAsText","state","days","finale","keys","loading","current","Promise","r","setTimeout","final","forEach","element","existed","indexOf","date","split","dayTMP","push","filteredHour","el","tmp","Object","values","accept","style","height","marginTop","range","alert","marginBottom","length","margin","display","flexDirection","fontWeight","marginRight","issuer","marginLeft","productID","issueTime","styles","selector","val","value","map","index","maxHeight","overflowY","overflowX","maxWidth","top","_el","id","slice","elem","ind","left","position","backgroundColor","color","width","i","variable","cursor","textAlign","displey"],"mappings":"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","sourcesContent":["import { Button, CircularProgress, Input, InputLabel, MenuItem, Select, Typography } from '@material-ui/core';\nimport React, { Component } from 'react';\nimport { findVariableName, findVariableUnit } from '../constants/variableName' //Importation des fonctions permettant de retrouver les noms et les unités des variables \nimport { findGroup } from \"../constants/unityConvert\"\n\nimport { convert } from \"./Parser\";//Importation de l'extracteur redéfnie\nimport { filter } from \"../constants/filter\";//Importation de la fonction permettant de filtrer\n\n\nconst sectionTitles = [\n    \"All\",\n    \"Wind\",\n    \"Wind speed threshold\",\n    \"Wind gusts 1h\",\n    \"Wind gusts 3h\",\n    \"Temperature\",\n    \"Visibility\",\n];\nclass Main extends Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            filed: false, //Controleur de l'existence d'un fichier chargé\n            data: [], //les lignes de données\n            days: [], //les jours\n            finale: [], //données compilées\n            keys: [], //les variables (PPPP et autres)\n            loading: false, //Controleur du chargement de la page\n            supp: null, //Données suppléméntaires de locations,\n            filter: \"All\",\n            current: {}\n        }\n    }\n\n    //Fonction de récupération de fichier\n    showFile = async (e) => {\n        e.preventDefault()\n        const reader = new FileReader()\n        reader.onload = async (e) => {\n            const text = (e.target.result)\n            var data = convert(text)\n            if (data.data) {\n                this.setState({ data: data.data, filed: true, supp: data.supp })\n            } else {\n                this.setState({ filed: false })\n            }\n\n        };\n        e.target.files[0] && reader.readAsText(e.target.files[0])\n    }\n\n\n    //Fonction de compilation des données\n    async range() {\n        await new Promise(r => setTimeout(r, 2000));\n        var days = []\n        var final = []\n        this.state.data.forEach(element => {\n            var existed = days.indexOf(element.date.split('T')[0])\n\n            if (existed === -1) {\n                var dayTMP = element.date.split('T')[0]\n                days.push(dayTMP)\n            }\n        });\n        this.setState({\n            days: days\n        }, () => {\n            //Extraction du Jour/Mois/Années des dates\n            days.forEach((element) => {\n                var filteredHour = this.state.data.filter((el) => el.date.split('T')[0] === element)\n                var tmp = {}\n                tmp['date'] = element;\n                tmp[\"values\"] = filteredHour\n\n                final.push(tmp);\n            });\n\n            this.setState({ finale: final, keys: Object.keys(final[0].values[0].values), loading: false })\n        })\n    }\n\n    //Rendu visuel\n    render() {\n\n        return (\n            <div>\n                <Typography variant=\"h3\" component=\"h2\">Convertisseur Kml to JS</Typography>\n                <div>\n                    <Input type=\"file\" onChange={(e) => this.showFile(e)} inputProps={{ accept: '.xml,.kml', style: { height: 30 } }} style={{ marginTop: 20, }} />\n                </div>\n                <br />\n                <Button\n                    title='Valider'\n                    onClick={() => {\n                        if (this.state.filed) {\n                            this.setState({ loading: true }, () => { this.range() })\n                        } else {\n                            alert('Veuillez choisir un fichier à convertir')\n                        }\n                    }}\n                    color=\"primary\"\n                    variant=\"contained\"\n                    style={{ marginTop: 10, marginBottom: 10 }}\n                >Valider</Button>\n\n                <div>\n                    {\n                        this.state.loading && <CircularProgress color=\"secondary\" style={{ marginTop: 15 }} />\n                    }\n                </div>\n\n                <div>\n                    {\n                        this.state.finale.length > 0 && this.state.filed &&\n                        <div>\n                            <div style={{ margin: 20 }} >\n                                <div style={{ display: \"flex\", flexDirection: \"row\" }} >\n                                    <Typography style={{ fontWeight: 'bold', marginRight: 5 }} >Origin : </Typography>\n                                    <Typography>EBBR</Typography>\n                                </div>\n                                <div style={{ display: \"flex\", flexDirection: \"row\" }} >\n                                    <Typography style={{ fontWeight: 'bold', marginRight: 5, }} >Issuer : </Typography>\n                                    <Typography>{this.state.supp.issuer}</Typography>\n                                    <Typography style={{ fontWeight: 'bold', marginRight: 5, marginLeft: 20 }} >ProductID : </Typography>\n                                    <Typography>{this.state.supp.productID}</Typography>\n                                    <Typography style={{ fontWeight: 'bold', marginRight: 5, marginLeft: 20 }} >IssueTime : </Typography>\n                                    <Typography>{this.state.supp.issueTime}</Typography>\n                                    {/* <Typography style={{ fontWeight: 'bold', marginRight: 5, marginLeft: 20 }} >Origin : </Typography>\n                                    <Typography>EBBR</Typography> */}\n                                </div>\n                            </div>\n\n                            <div style={{ display: \"flex\", flexDirection: \"row\" }} >\n\n                                <div style={styles.selector} >\n                                    <InputLabel id=\"label\">Location</InputLabel>\n                                    <Select labelId=\"label\" id=\"select\" value=\"EBBR\">\n                                        <MenuItem value=\"EBBR\">EBBR</MenuItem>\n                                    </Select>\n                                </div>\n\n                                <div style={styles.selector} >\n                                    <InputLabel id=\"label\">Parameter group</InputLabel>\n                                    <Select labelId=\"label\" id=\"select\" value={this.state.filter} onChange={(val) => { this.setState({ filter: val.target.value }) }} >\n                                        {\n                                            sectionTitles.map((el, index) => (\n                                                <MenuItem key={index} value={el}>{el}</MenuItem>\n                                            ))\n                                        }\n                                    </Select>\n                                </div>\n                            </div>\n                        </div >\n                    }\n                    {\n                        this.state.finale.length > 0 && this.state.filed && <div\n                        >\n\n                            <table\n                                style={{\n                                    display: \"block\",\n                                    maxHeight: 600,\n                                    overflowY: \"scroll\",\n                                    overflowX: \"scroll\",\n                                    maxWidth: \"96%\",\n                                    marginLeft: \"2%\"\n                                }}\n                            >\n                                <thead  >\n                                    <tr>\n                                        {\n                                            this.state.finale.length > 0 && this.state.filed && <th style={{ top: 0 }} ></th>\n                                        }\n                                        {\n                                            this.state.finale.map((_el) => (\n                                                _el.values.map((el, id) => (\n                                                    <th style={{ top: 0 }} key={id} >\n                                                        {_el.date.slice(8, 10)}<br />\n                                                        {el.date.split('T')[1].slice(0, 2) + \"Z\"}\n                                                    </th>\n                                                ))\n                                            ))\n                                        }\n                                    </tr>\n                                </thead>\n                                <tbody>\n                                    {\n                                        filter(this.state.filter, this.state.keys).map((elem, ind) => (\n                                            <tr key={ind} >\n                                                <td style={{ left: 0, position: \"sticky\", backgroundColor: \"#1a8cff\" }} >\n                                                    <div style={{ fontWeight: 'bold', color: \"#fff\", width: 300 }} >\n                                                        {findVariableName(elem) === false ? elem : (findVariableName(elem) + \"\\n(\" + findVariableUnit(elem) + \")\")}\n                                                    </div>\n                                                </td>\n                                                {\n                                                    this.state.finale.map((_el) => (\n                                                        _el.values.map((el, i) => (\n                                                            <td onClick={() => { this.setState({ current: { id: i, variable: elem } }) }} style={{ cursor: \"pointer\", backgroundColor: (i === this.state.current.id || elem === this.state.current.variable) && \"#70b7ff\" }} key={i} >{el.values[elem] === \"-\" ? \"N/A\" : findGroup(elem, el.values[elem])}</td>\n                                                        ))\n                                                    ))\n                                                }\n                                            </tr>\n                                        ))\n                                    }\n                                </tbody>\n                            </table>\n                            <Typography style={{ textAlign: 'left', marginLeft: '2%' }} >{\"Showing 1 to \" + this.state.keys.length + \" of \" + this.state.keys.length + \" pages\"}</Typography>\n                        </div>\n                    }\n                </div >\n            </div >\n        )\n    }\n}\n\nconst styles = {\n    selector: {\n        displey: \"flex\",\n        flexDirection: 'row',\n        margin: 15\n    }\n}\n\nexport default Main;"]},"metadata":{},"sourceType":"module"}